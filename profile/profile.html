<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Cache Control Tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberTrader | Profile</title>
    <style>
        /* All your existing CSS styles here */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap');
        
        :root {
            --cyber-blue: #0a0a2a;
            --neon-teal: #00ffcc;
            --neon-purple: #cc00ff;
            --text-glow: 0 0 10px var(--neon-teal);
            --cyber-dark: #050517;
            --cyber-light: #1a1a2e;
            --error-red: #ff3366;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background-color: var(--cyber-blue);
            color: white;
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: 
                linear-gradient(rgba(5, 5, 23, 0.9), rgba(10, 10, 42, 0.9)),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="2" height="2" x="0" y="0" fill="%2300ffcc" opacity="0.2"/></svg>');
            background-size: 30px 30px;
        }
        
        /* Rest of your CSS styles... */
        /* ... (Include all your existing CSS styles here) ... */
        
    </style>
</head>
<body>
    <!-- Your existing HTML content -->
    <div class="container">
        <header class="header">
            <div class="logo" onclick="window.location.href='../index.html'">CyberTRADER</div>
            <button class="logout-btn" id="logoutBtn">LOGOUT</button>
        </header>
        
        <!-- Rest of your HTML content... -->
        <!-- ... (Include all your existing HTML content here) ... -->
        
    </div>

    <!-- Your existing modals and other elements -->
    
    <!-- Version Check Script -->
    <script>
        // Cache Busting Version Check
        const VERSION = "1.2";
        if(localStorage.getItem('app_version') !== VERSION) {
            localStorage.setItem('app_version', VERSION);
            window.location.reload(true);
        }

        // API Keys
        const FINNHUB_API_KEY = 'd0uelbpr01qn5fk4u25gd0uelbpr01qn5fk4u260';
        
        // Global variables
        let currentUser = null;
        let stockDataCache = {};
        let stockUpdateInterval = null;

        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with mock user data if not logged in (for demo)
            currentUser = JSON.parse(sessionStorage.getItem('cybertrader_currentUser')) || {
                id: 'user123',
                username: 'DemoUser',
                email: 'demo@cybertrader.com',
                profilePic: 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png',
                watchedStocks: ['AAPL', 'MSFT', 'TSLA'],
                portfolio: null
            };
            sessionStorage.setItem('cybertrader_currentUser', JSON.stringify(currentUser));
            
            // Initialize user data
            initializeUserUI(currentUser);
            
            // Set up event listeners
            setupEventListeners();
            
            // Load watchlist with real-time data
            if (currentUser.watchedStocks && currentUser.watchedStocks.length > 0) {
                loadWatchedStocks(currentUser.watchedStocks);
                startStockUpdates(currentUser.watchedStocks);
            } else {
                showEmptyWatchlist();
            }
        });

        // All your existing JavaScript functions...
        // ... (Include all your existing JavaScript functions here) ...

        function updateUser(updatedUser) {
            sessionStorage.setItem('cybertrader_currentUser', JSON.stringify(updatedUser));
            currentUser = updatedUser;
            return true;
        }

        function deleteUserAccount(userId) {
            sessionStorage.removeItem('cybertrader_currentUser');
            alert('Account deleted successfully. Redirecting to login page...');
        }
    </script>
</body>
</html>
